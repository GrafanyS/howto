# Прсотой сервер

Пошаговая инструкция по настройке и обслуживанию сервера для размещения веб проектов на Python, с пользованием стека  Nginx + Gunicorn + Flask 



#### Дисклеймер (Disclaimer)

Это не универсальный метод создания веб серверов, а всего лишь частное представление того, как я это делаю для своих проектов. Поэтому как говорил одни кулинарный блогер:

> Знатоков того самого единственного правильного рецепта я попрошу сегодня не беспокоится.

Я не сторонник простых инструкций написанных по принципу - "скопируйте сюда этот файл, а сюда перепишите эту команду и нажмите ввод", однако и превращать эту статью в полный курс по всем аспектам затронутым в данном руководстве нет никакой возможности. Поэтому это будет некий средний вариант, где я буду показывать вам последовательность действий, попутно поясняя смысл введены команд, их ключей и параметров конфигурационных файлов. 

Я попробую разбить руководство на некие условные этапы, но четкой градации, как мне кажется достичь просто невозможно, в том числе из-за сильной интеграции сервисов и процессов друг с другом.



#### Задача

Нам необходимо настроить и запустить веб-сервер, на котором будет работать на проект написанный на языке Python. 

Какой проект? Да какой угодно. Может это будет чат бот для Telegram или навык для Яндекс Алисы или Google Assitant`а, возможно сервис который ведет статистику пользователей вашей игры, либо даже просто статичная веб страничка, вот, например, с этой инструкцией.



#### Где.

В первую очередь это вопрос про деньги, поскольку техническая реализация у поставщиков плюс-минус одинаковая, ну как минимум однотипная. Поэтому ответ - где угодно, смотрите, что бы вам было комфортно по платежам.

Регистрация доменного имени. Я для этой цели воспользовался сервисом регистрации от AWS - Route 53. Просто потому, что я давно им пользуюсь, и это не первый домен который я у них регистрирую, вы же, построюсь, можете воспользоваться  услугами абсолютно любого регистратора.

Да, возможно кто то скажет - ну зачем я буду тратить лишние 10-20 долларов на доменное имя, если можно ходить на сервер просто по IP? И да, и нет. Современные правила предполагают использование зашифрованного соединения с нашим сервером, а сервисы предоставляющие сертификаты требуют именно зарегистрированное доменное имя, а не IP адрес. Иначе пользователь, в лучшем случае получит постоянные сообщения браузера об угрозе безопасности, а в худшем вообще не сможет зайти.

Итак, я только зарегистрировал имя  [blueoctopus.cc](), и на текущий момент на нем ни одной записи.

Саму виртуальную машину мы сделаем в Yandex Cloud. (Да, я все понимаю, но прошу не осуждать меня).

 

#### Виртуальная машина.

Даже если это покажется странным, но начнем мы не с яндекса, а с вашей домашней машины. Поскольку современные методы регистрации предполагают использование пары ключей **SSH** (**S**ecure **SH**ell), то мы их сразу и создадим, что бы при создании виртуальной машины сразу передать серверу открытую часть.

Итак, откроем консоль кликнув на соответствующую иконку, либо нажав комбинацию славишь Ctrl + Alt + T (Command (⌘) + T) и сразу перейдем в каталог назначенный по умолчанию для хранения ключей.

```bash
cd .ssh
```

Если такой папки нет, то ее необходимо создать

```bash
mkdir .ssh
```



