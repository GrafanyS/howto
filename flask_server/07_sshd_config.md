#### Сервер SSH

Давайте откроем настройки сервера SSH. Это можно сделать напечатав в командной строке:

```bash
sudo nano /etc/ssh/sshd_config
```

Либо запустив midnight commander, найти, выделить файл и нажать F4. При первом запуске МС попросить выбрать предпочитаемый редактор, рекомендую выбрать **nano**

```bash
sudo mc
```

И да, большую часть команд и правок мы будем вносить используя **sudo**, (Substitute User and do, дословно «подменить пользователя и выполнить»). Это необходимо для повышения наших полномочий до уровня root

Давайте взглянем на конфигурационный файл. Большинство строк с параметрами комментированы символом **#**, предполагается, что значения указанные в них - будут использованы по умолчанию. Давайте вспомним старый принцип программирования - "явное лучше чем неявное", и пройдемся по параметрам, которые я считаю важным указать явным способом.

Давайте пробежимся по файлу сверху вниз, и первый параметр который нам нужен выглядит так: 

```bash
#PermitRootLogin prohibit-password
```

Очевидно из названия - разрешить руту логинится удаленно с использованием непарольных методов аутентификации. Сканер отпечатков, смарт-карта и т.д.

Раскомментируем строку и ставим значение в **no**:

```bash
PermitRootLogin no
```

Никаких удаленных авторизаций для root



Следующий параметр за возможность авторизации по SSH ключу. Мы именно так и зашли на наш сервер. 

```
PubkeyAuthentication yes
```

Укажем это явно, оставляем **yes** по умолчанию, просто удалим знак комментария.



Дальше будет длинная строка с параметрами отделенными табуляцией:

```
#AuthorizedKeysFile     .ssh/authorized_keys .ssh/authorized_keys2
```

Это указание на то где искать файл с публичными ключами для авторизации пользователей. Оставляем как есть, просто раскомментируем.



И последний обязательный пункт:

```
#PasswordAuthentication yes
```

Удаляем символ комментария и устанавливаем параметр в **no**. Никаких парольных идентификаций, только файлы ключей.

```
PasswordAuthentication no
```



И последний, не скажу, что обязательный параметр, просто убедитесь, что он выглядит именно так:

```
X11Forwarding yes
```

Если на сервер нужно будет установить GUI, он поможет перенаправить вывод графической части приложения на вашу локальную машину.



Все. Теперь нажимаем Ctrl + X и подтверждаем запись файла.

Если вы использовали midnight commander то нажмите Ctrl + O, это скроет панели, отобразив терминал, но не закроет сам MC, так же как и не прервет сессию **sudo**. Повторное нажатие вернет панели обратно.

Перезапустим наш сервис SSH, что бы применить внесенные изменения.

```bash
sudo systemctl restart ssh
```

Можно отключится напечатав **exit**, и подключится опять, для проверки работоспособности, он это необязательно.



