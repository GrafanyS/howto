#### Устанавливаем Nginx

Именно он будет отвечать за прием входящих запросов и проксированием их в глубь нашего сервера.

Никаких дополнительных модулей устанавливать не планируется, поэтому просто ставим из стандартного репозитория:

```bash
sudo apt install nginx
```

И стразу же проверим его статус:

```bash
sudo systemctl status nginx
```

Все.

Работает. Да, мы еще не настроили доменное имя, но если мы откроем браузер и введем там внешний IP нашей виртуальной машины, то мы увидим стандартную страницу приветствия Nginx. Так же можно воспользоваться утилитой **curl**, не зря же мы ее ставили.

```bash
curl 178.154.219.150
```

178.154.219.150 - вам следует заменить на свой.

Стандартный HTML лежит в папке **/var/www/html**, при желании можете его заменить на любой другой. Мы в рамках данной инструкции делать этого не будем, поскольку использование данной папки в дальнейшем не планируется.

Все нормально, сервер запущен и работает, а его дальнейшую настройку оставим на потом. 



Разве что укажу сразу основные команды, которые необходимо знать при работе с Nginx:



Самая главная команда, которую будем использовать даже чаще чем запрос статуса:

```bash
sudo nginx -t
```

Это тестирование конфигурации, ее необходимо использовать после каждого внесения изменений в конфигурационные файлы, Nginx проведет проверку их синтаксиса и сообщит, если что то не так. Лучше об этом узнать сейчас, чем во время отказа при запуске.



Кстати о перезагрузке. Почему то многие советуют использовать системный метод:

```bash
sudo systemctl restart nginx
```

Эта команда целиком остановит и запустит заново все службу, разорвав все текущие соединения, что не всегда хорошо. Точнее всегда не хорошо. 

Вы можете сказать, а какая разница, ну нажмет пользователь обновить страницу, а многие может и вообще не заметят этих секунд перезагрузки. Опять же верно, но отчасти. А представьте, что у нас на базе этого сервера работает приложение, которое пишет игровую статистику вашей же разработанной игры? Например получает json файл с новым пользовательским рекордом, и готовится записать его в базу данных. А тут раз, и все потухло. Рекорд не записан, игра напрасно ждет ответа от сервера о статусе операции, пользователь страдает. Или у нас работает бек-энд бота для телеграма или навыка Яндекс Алисы, а там вообще время ожидания 2 и 3 секунды. Получится, что пользователь спросил что то у колонки, а в ответ тишина, Яндекс ждет 2 секунды и отключает сеанс с навыком. Не очень хорошо, согласитесь?

В общем, используйте этот метод только в том случае, когда точно понимаете зачем это делать.

В большинстве же случаев достаточно мягкой перезагрузки, без остановки самого сервиса:

```bash
sudo systemctl reload nginx
```

Либо воспользоваться внутренней командой самого Nginx:

(Да и официальная документация рекомендует именно ее).

```bash
sudo nginx -s reload
```

Это позволит серверу протестировать новую конфигурацию, и если все в порядке - Nginx начнет  запускать новые процессы уже с ней, завершая старые в рабочем порядке. При таком способе подключения пользователей разорваны не будут.



Ну и давайте убедимся, что наш веб-сервер будет запущен при старте операционной системы:

```bash
sudo systemctl is-enabled nginx
```

Если все в порядке - двигаемся дальше, если нет, то добавим его в автозагрузку:

```bash
sudo systemctl enable nginx
```

